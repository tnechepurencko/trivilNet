модуль json

импорт "стд::строки"

фн сохранить*(у: Узел): Строка {

    пусть сб = строки.Сборщик{}

    выбор пусть тек: тип у {
    когда Ошибка: 
            сб.ф("ошибка в позиции $;: $;", тек.позиция, тек.сообщение) 
    когда Число: 
        если тек.целое? { 
            сб.ф("$;", тек.цел) 
        } иначе {
            сб.ф("$;", тек.вещ) 
        }
    когда Стр: 
        сб.ф("\"$;\"", тек.строка) 
    другое
        авария("!!")
    }

    вернуть сб.строка()
}